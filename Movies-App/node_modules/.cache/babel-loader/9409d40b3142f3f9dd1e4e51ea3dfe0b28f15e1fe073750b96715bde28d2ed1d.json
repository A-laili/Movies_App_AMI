{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\flutter\\\\movies-ami\\\\src\\\\components\\\\StreamingComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport * as faceapi from 'face-api.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StreamingComponent = () => {\n  _s();\n  const videoRef = useRef();\n  const [ages, setAges] = useState([]);\n  const [averageAge, setAverageAge] = useState(null);\n  useEffect(() => {\n    startVideo();\n    loadModels();\n  }, []);\n  const startVideo = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(currentStream => {\n      videoRef.current.srcObject = currentStream;\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  const loadModels = async () => {\n    await faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\");\n    await faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\");\n    await faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\");\n    await faceapi.nets.faceExpressionNet.loadFromUri(\"/models\");\n    await faceapi.nets.ageGenderNet.loadFromUri(\"/models\");\n  };\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      detectAge();\n    }, 100); // Adjust interval for real-time processing\n\n    return () => clearInterval(intervalId);\n  }, []);\n  const detectAge = async () => {\n    if (videoRef.current && videoRef.current.readyState === videoRef.current.HAVE_ENOUGH_DATA) {\n      const detections = await faceapi.detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks().withAgeAndGender();\n      if (detections) {\n        const age = faceapi.utils.round(detections.age, 0);\n        setAges(prevAges => [...prevAges, age]);\n      }\n    }\n  };\n  useEffect(() => {\n    if (ages.length > 0) {\n      const totalAges = ages.reduce((acc, curr) => acc + curr, 0);\n      const average = totalAges / ages.length;\n      setAverageAge(average.toFixed(2));\n    } else {\n      setAverageAge(null);\n    }\n  }, [ages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"myapp\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Real-time Age Detection\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"appvideo\",\n      children: /*#__PURE__*/_jsxDEV(\"video\", {\n        crossOrigin: \"anonymous\",\n        ref: videoRef,\n        autoPlay: true,\n        muted: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), averageAge !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Average age: \", averageAge]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), averageAge > 18 ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.href = 'https://www.netflix.com',\n        children: \"Go to Netflix\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Error: You must be over 18 to access Netflix.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n_s(StreamingComponent, \"EqareDVJ/Klo2L/h0ad9IbXwEo4=\");\n_c = StreamingComponent;\nexport default StreamingComponent;\nvar _c;\n$RefreshReg$(_c, \"StreamingComponent\");","map":{"version":3,"names":["React","useRef","useEffect","useState","faceapi","jsxDEV","_jsxDEV","StreamingComponent","_s","videoRef","ages","setAges","averageAge","setAverageAge","startVideo","loadModels","navigator","mediaDevices","getUserMedia","video","then","currentStream","current","srcObject","catch","err","console","log","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","faceExpressionNet","ageGenderNet","intervalId","setInterval","detectAge","clearInterval","readyState","HAVE_ENOUGH_DATA","detections","detectSingleFace","TinyFaceDetectorOptions","withFaceLandmarks","withAgeAndGender","age","utils","round","prevAges","length","totalAges","reduce","acc","curr","average","toFixed","className","children","fileName","_jsxFileName","lineNumber","columnNumber","crossOrigin","ref","autoPlay","muted","onClick","window","location","href","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/flutter/movies-ami/src/components/StreamingComponent.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport * as faceapi from 'face-api.js';\r\n\r\nconst StreamingComponent = () => {\r\n    const videoRef = useRef();\r\n    const [ages, setAges] = useState([]);\r\n    const [averageAge, setAverageAge] = useState(null);\r\n\r\n    useEffect(() => {\r\n        startVideo();\r\n        loadModels();\r\n    }, []);\r\n\r\n    const startVideo = () => {\r\n        navigator.mediaDevices.getUserMedia({ video: true })\r\n            .then((currentStream) => {\r\n                videoRef.current.srcObject = currentStream;\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    const loadModels = async () => {\r\n        await faceapi.nets.tinyFaceDetector.loadFromUri(\"/models\");\r\n        await faceapi.nets.faceLandmark68Net.loadFromUri(\"/models\");\r\n        await faceapi.nets.faceRecognitionNet.loadFromUri(\"/models\");\r\n        await faceapi.nets.faceExpressionNet.loadFromUri(\"/models\");\r\n        await faceapi.nets.ageGenderNet.loadFromUri(\"/models\");\r\n    };\r\n\r\n    useEffect(() => {\r\n        const intervalId = setInterval(() => {\r\n            detectAge();\r\n        }, 100); // Adjust interval for real-time processing\r\n\r\n        return () => clearInterval(intervalId);\r\n    }, []);\r\n\r\n    const detectAge = async () => {\r\n        if (videoRef.current && videoRef.current.readyState === videoRef.current.HAVE_ENOUGH_DATA) {\r\n            const detections = await faceapi.detectSingleFace(videoRef.current, new faceapi.TinyFaceDetectorOptions())\r\n                .withFaceLandmarks()\r\n                .withAgeAndGender();\r\n\r\n            if (detections) {\r\n                const age = faceapi.utils.round(detections.age, 0);\r\n                setAges(prevAges => [...prevAges, age]);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (ages.length > 0) {\r\n            const totalAges = ages.reduce((acc, curr) => acc + curr, 0);\r\n            const average = totalAges / ages.length;\r\n            setAverageAge(average.toFixed(2));\r\n        } else {\r\n            setAverageAge(null);\r\n        }\r\n    }, [ages]);\r\n\r\n    return (\r\n        <div className=\"myapp\">\r\n            <h1>Real-time Age Detection</h1>\r\n            <div className=\"appvideo\">\r\n                <video crossOrigin=\"anonymous\" ref={videoRef} autoPlay muted></video>\r\n            </div>\r\n            {averageAge !== null && (\r\n                <div>\r\n                    <p>Average age: {averageAge}</p>\r\n                    {averageAge > 18 ? (\r\n                        <button onClick={() => window.location.href = 'https://www.netflix.com'}>Go to Netflix</button>\r\n                    ) : (\r\n                        <p>Error: You must be over 18 to access Netflix.</p>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default StreamingComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
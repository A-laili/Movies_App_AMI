{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\flutter\\\\movies-ami\\\\src\\\\components\\\\MovieList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Map, Marker } from \"pigeon-maps\";\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MovieList = props => {\n  _s();\n  const [selectedMovie, setSelectedMovie] = useState(null);\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbyCinemas, setNearbyCinemas] = useState([]);\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      setUserLocation({\n        lat: latitude,\n        lng: longitude\n      });\n    }, error => {\n      console.error('Error getting user location:', error);\n    });\n  }, []);\n  useEffect(() => {\n    if (userLocation) {\n      const nearby = props.cinemas.filter(cinema => {\n        const distance = getDistance(userLocation.lat, userLocation.lng, cinema.latitude, cinema.longitude);\n        return distance <= 10;\n      });\n      setNearbyCinemas(nearby);\n    }\n  }, [userLocation, props.cinemas]);\n  const getDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = deg2rad(lat2 - lat1);\n    const dLon = deg2rad(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c;\n    return distance;\n  };\n  const deg2rad = deg => {\n    return deg * (Math.PI / 180);\n  };\n  const handleGetDirections = cinema => {\n    const {\n      lat,\n      longitude\n    } = cinema;\n    const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${longitude}`;\n    window.open(url, '_blank');\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Map, {\n      height: 300,\n      defaultCenter: [(userLocation === null || userLocation === void 0 ? void 0 : userLocation.lat) || 0, (userLocation === null || userLocation === void 0 ? void 0 : userLocation.lng) || 0],\n      defaultZoom: 11,\n      children: nearbyCinemas.map(cinema => /*#__PURE__*/_jsxDEV(Marker, {\n        anchor: [cinema.latitude, cinema.longitude],\n        onClick: () => handleGetDirections(cinema),\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"#\",\n          onClick: () => handleGetDirections(cinema),\n          children: cinema.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)\n      }, cinema.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(MovieList, \"tYjF6pak4T24TKGhcsWKcr3C9H8=\");\n_c = MovieList;\nexport default MovieList;\nvar _c;\n$RefreshReg$(_c, \"MovieList\");","map":{"version":3,"names":["React","useState","useEffect","axios","Map","Marker","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","MovieList","props","_s","selectedMovie","setSelectedMovie","userLocation","setUserLocation","nearbyCinemas","setNearbyCinemas","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","lat","lng","error","console","nearby","cinemas","filter","cinema","distance","getDistance","lat1","lon1","lat2","lon2","R","dLat","deg2rad","dLon","a","Math","sin","cos","c","atan2","sqrt","deg","PI","handleGetDirections","url","window","open","children","height","defaultCenter","defaultZoom","map","anchor","onClick","to","name","fileName","_jsxFileName","lineNumber","columnNumber","id","_c","$RefreshReg$"],"sources":["C:/Users/hp/Desktop/flutter/movies-ami/src/components/MovieList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Map, Marker } from \"pigeon-maps\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst MovieList = (props) => {\r\n  const [selectedMovie, setSelectedMovie] = useState(null);\r\n  const [userLocation, setUserLocation] = useState(null);\r\n  const [nearbyCinemas, setNearbyCinemas] = useState([]);\r\n\r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        setUserLocation({ lat: latitude, lng: longitude });\r\n      },\r\n      (error) => {\r\n        console.error('Error getting user location:', error);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (userLocation) {\r\n      const nearby = props.cinemas.filter(cinema => {\r\n        const distance = getDistance(userLocation.lat, userLocation.lng, cinema.latitude, cinema.longitude);\r\n        return distance <= 10;\r\n      });\r\n      setNearbyCinemas(nearby);\r\n    }\r\n  }, [userLocation, props.cinemas]);\r\n\r\n  const getDistance = (lat1, lon1, lat2, lon2) => {\r\n    const R = 6371;\r\n    const dLat = deg2rad(lat2 - lat1);\r\n    const dLon = deg2rad(lon2 - lon1);\r\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) *\r\n      Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    const distance = R * c;\r\n    return distance;\r\n  };\r\n\r\n  const deg2rad = (deg) => {\r\n    return deg * (Math.PI / 180);\r\n  };\r\n\r\n  const handleGetDirections = (cinema) => {\r\n    const { lat, longitude } = cinema;\r\n    const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${longitude}`;\r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Map height={300} defaultCenter={[userLocation?.lat || 0, userLocation?.lng || 0]} defaultZoom={11}>\r\n        {nearbyCinemas.map(cinema => (\r\n          <Marker\r\n            key={cinema.id}\r\n            anchor={[cinema.latitude, cinema.longitude]}\r\n            onClick={() => handleGetDirections(cinema)}\r\n          >\r\n            <Link to=\"#\" onClick={() => handleGetDirections(cinema)}>\r\n              {cinema.name}\r\n            </Link>\r\n          </Marker>\r\n        ))}\r\n      </Map>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MovieList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}